<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Smart QR View</title>

        <!-- Bootstrap 5 CSS -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />

        <link rel="stylesheet" href="style.css" />
    </head>
    <body class="bg-light">
        <div class="container my-4 p-4 bg-white rounded shadow-sm">
            <h2 class="text-center mb-3">Your Smart QR Links</h2>
            <div class="row g-3" id="linksContainer">
                <!-- Buttons will be injected here -->
            </div>
        </div>

        <script>
            // Get QR data from URL
            const params = new URLSearchParams(window.location.search);
            const data = params.get("data");
            if (!data) {
                document.getElementById("linksContainer").innerHTML =
                    "<p class='text-center text-danger'>No data found!</p>";
            } else {
                const payload = JSON.parse(decodeURIComponent(data));
                const container = document.getElementById("linksContainer");

                payload.links.forEach((link) => {
                    const col = document.createElement("div");
                    col.className =
                        "col-12 col-md-6 d-flex justify-content-center";

                    const a = document.createElement("a");
                    a.href = link.url;
                    a.className = "btn btn-primary w-100";
                    a.target = "_blank";
                    a.textContent = link.label;

                    col.appendChild(a);
                    container.appendChild(col);
                });
            }
        </script>
    </body>
</html>
